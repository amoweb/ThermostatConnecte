<!doctype html>
<html lang="fr">
    <head>
        <meta charset="utf-8" />
        <title>Thermostat</title> 
    </head>
    <body>

        http://192.168.0.22/temp

        <h1>Température</h1>

        <div id="currentTemperature"></div>

        <form action="/target" method="post" >
            <label for="tmptargetname">Consigne temperature :</label><br>     
            <input type="text" id="tmptargetname" name="tmptargetname" value=""><br><br>          
            <input type="submit" value="OK">   
        </form> 

        <h1>Heure et date</h1>
        <form action="/time" method="post" >
            <input type="number" id="hour" name="hour" value="10" />:
            <input type="number" id="minute" name="minute" value="15" />
            <br /><br />
            <select name="day">
                <option value="0">Lundi</option>
                <option value="1">Mardi</option>
                <option value="2">Mercredi</option>
                <option value="3">Jeudi</option>
                <option value="4">Vendredi</option>
                <option value="5">Samedi</option>
                <option value="6">Dimanche</option>
            </select>
            <br /><br />
            <input type="submit" value="OK" />
        </form>
        <script type="text/javascript">

            const Http = new XMLHttpRequest();
            Http.open("GET", "/target");
            Http.onload = (e) => {
                var e = document.getElementById("tmptargetname");
                e.value = Http.responseText;
            }
            Http.send();

            function update() {
                const Http = new XMLHttpRequest();
                Http.open("GET", "/temp");
                Http.onload = (e) => {
                    var e = document.getElementById("currentTemperature");
                    e.innerHTML = "Actuelle : " + Http.responseText + "°C";
                }
                Http.send();
            }

            setInterval(update, 1000);
        </script>
    </body>
</html>

